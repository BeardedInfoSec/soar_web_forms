{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Route,Routes,Navigate}from'react-router-dom';import{SplunkThemeProvider}from'@splunk/themes';import Cookies from'js-cookie';import Navbar from'./components/Navbar';import FormBuilder from'./components/FormBuilder';import ViewForms from'./components/ViewForms';import Configuration from'./components/Configuration';import FormDisplay from'./components/FormDisplay';import Login from'./components/Login';import CreateUser from'./components/CreateUser';import ResetPassword from'./components/ResetPassword';import GrantPermissions from'./components/GrantPermissions';import AdminPage from'./components/AdminPage';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const[isAuthenticated,setIsAuthenticated]=useState(!!Cookies.get('token')// Check if token exists in cookies\n);const[userRole,setUserRole]=useState(Cookies.get('userRole')||'');// Get role from cookies\nconst[username,setUsername]=useState(Cookies.get('username')||'');// Get username from cookies\nuseEffect(()=>{// Check if token exists in cookies and set state accordingly\nif(Cookies.get('token')){setIsAuthenticated(true);setUserRole(Cookies.get('userRole'));setUsername(Cookies.get('username'));}},[]);const handleLogin=(role,user)=>{// Save token and user details in cookies\nCookies.set('token','user-session-token',{expires:7});// Replace with actual token\nCookies.set('userRole',role,{expires:7});Cookies.set('username',user,{expires:7});setIsAuthenticated(true);setUserRole(role);setUsername(user);console.log('User logged in with role:',role);};const handleLogout=()=>{// Remove cookies on logout\nCookies.remove('token');Cookies.remove('userRole');Cookies.remove('username');setIsAuthenticated(false);setUserRole('');setUsername('');console.log('User logged out');};return/*#__PURE__*/_jsx(SplunkThemeProvider,{family:\"enterprise\",density:\"comfortable\",children:/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Navbar,{isAuthenticated:isAuthenticated,onLogout:handleLogout,username:username,userRole:userRole// Pass userRole to Navbar\n}),/*#__PURE__*/_jsx(\"div\",{className:\"content\",children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Navigate,{to:isAuthenticated?\"/view-forms\":\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:isAuthenticated?/*#__PURE__*/_jsx(Navigate,{to:\"/view-forms\"}):/*#__PURE__*/_jsx(Login,{onLogin:handleLogin})}),/*#__PURE__*/_jsx(Route,{path:\"/view-forms\",element:isAuthenticated&&['admin','developer','read-only'].includes(userRole)?/*#__PURE__*/_jsx(ViewForms,{userRole:userRole}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/form-builder\",element:isAuthenticated&&['admin','developer'].includes(userRole)?/*#__PURE__*/_jsx(FormBuilder,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/configuration\",element:isAuthenticated&&['admin','developer'].includes(userRole)?/*#__PURE__*/_jsx(Configuration,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:isAuthenticated&&userRole==='admin'?/*#__PURE__*/_jsx(AdminPage,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/create-user\",element:isAuthenticated&&userRole==='admin'?/*#__PURE__*/_jsx(CreateUser,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/reset-password\",element:isAuthenticated&&userRole==='admin'?/*#__PURE__*/_jsx(ResetPassword,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/grant-permissions\",element:isAuthenticated&&userRole==='admin'?/*#__PURE__*/_jsx(GrantPermissions,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})}),/*#__PURE__*/_jsx(Route,{path:\"/forms/:formName\",element:isAuthenticated?/*#__PURE__*/_jsx(FormDisplay,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/login\"})})]})})]})});};export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Route","Routes","Navigate","SplunkThemeProvider","Cookies","Navbar","FormBuilder","ViewForms","Configuration","FormDisplay","Login","CreateUser","ResetPassword","GrantPermissions","AdminPage","jsx","_jsx","jsxs","_jsxs","App","isAuthenticated","setIsAuthenticated","get","userRole","setUserRole","username","setUsername","handleLogin","role","user","set","expires","console","log","handleLogout","remove","family","density","children","onLogout","className","path","element","to","onLogin","includes"],"sources":["C:/Users/abarbas/Desktop/soar_web_forms/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { BrowserRouter as Router, Route, Routes, Navigate } from 'react-router-dom';\r\nimport { SplunkThemeProvider } from '@splunk/themes';\r\nimport Cookies from 'js-cookie';\r\nimport Navbar from './components/Navbar';\r\nimport FormBuilder from './components/FormBuilder';\r\nimport ViewForms from './components/ViewForms';\r\nimport Configuration from './components/Configuration';\r\nimport FormDisplay from './components/FormDisplay';\r\nimport Login from './components/Login';\r\nimport CreateUser from './components/CreateUser';\r\nimport ResetPassword from './components/ResetPassword';\r\nimport GrantPermissions from './components/GrantPermissions';\r\nimport AdminPage from './components/AdminPage';\r\n\r\nconst App = () => {\r\n    const [isAuthenticated, setIsAuthenticated] = useState(\r\n        !!Cookies.get('token') // Check if token exists in cookies\r\n    );\r\n    const [userRole, setUserRole] = useState(Cookies.get('userRole') || ''); // Get role from cookies\r\n    const [username, setUsername] = useState(Cookies.get('username') || ''); // Get username from cookies\r\n\r\n    useEffect(() => {\r\n        // Check if token exists in cookies and set state accordingly\r\n        if (Cookies.get('token')) {\r\n            setIsAuthenticated(true);\r\n            setUserRole(Cookies.get('userRole'));\r\n            setUsername(Cookies.get('username'));\r\n        }\r\n    }, []);\r\n\r\n    const handleLogin = (role, user) => {\r\n        // Save token and user details in cookies\r\n        Cookies.set('token', 'user-session-token', { expires: 7 }); // Replace with actual token\r\n        Cookies.set('userRole', role, { expires: 7 });\r\n        Cookies.set('username', user, { expires: 7 });\r\n\r\n        setIsAuthenticated(true);\r\n        setUserRole(role);\r\n        setUsername(user);\r\n        console.log('User logged in with role:', role);\r\n    };\r\n\r\n    const handleLogout = () => {\r\n        // Remove cookies on logout\r\n        Cookies.remove('token');\r\n        Cookies.remove('userRole');\r\n        Cookies.remove('username');\r\n\r\n        setIsAuthenticated(false);\r\n        setUserRole('');\r\n        setUsername('');\r\n        console.log('User logged out');\r\n    };\r\n\r\n    return (\r\n        <SplunkThemeProvider family=\"enterprise\" density=\"comfortable\">\r\n            <Router>\r\n                <Navbar \r\n                    isAuthenticated={isAuthenticated} \r\n                    onLogout={handleLogout} \r\n                    username={username} \r\n                    userRole={userRole} // Pass userRole to Navbar\r\n                />\r\n                <div className=\"content\">\r\n                    <Routes>\r\n                        <Route path=\"/\" element={<Navigate to={isAuthenticated ? \"/view-forms\" : \"/login\"} />} />\r\n                        <Route path=\"/login\" element={isAuthenticated ? <Navigate to=\"/view-forms\" /> : <Login onLogin={handleLogin} />} />\r\n                        <Route\r\n                            path=\"/view-forms\"\r\n                            element={isAuthenticated && ['admin', 'developer', 'read-only'].includes(userRole) ? <ViewForms userRole={userRole} /> : <Navigate to=\"/login\" />}\r\n                        />\r\n                        <Route\r\n                            path=\"/form-builder\"\r\n                            element={isAuthenticated && ['admin', 'developer'].includes(userRole) ? <FormBuilder /> : <Navigate to=\"/login\" />}\r\n                        />\r\n                        <Route\r\n                            path=\"/configuration\"\r\n                            element={isAuthenticated && ['admin', 'developer'].includes(userRole) ? <Configuration /> : <Navigate to=\"/login\" />}\r\n                        />\r\n                        <Route\r\n                            path=\"/admin\"\r\n                            element={isAuthenticated && userRole === 'admin' ? <AdminPage /> : <Navigate to=\"/login\" />}\r\n                        />\r\n                        <Route\r\n                            path=\"/create-user\"\r\n                            element={isAuthenticated && userRole === 'admin' ? <CreateUser /> : <Navigate to=\"/login\" />}\r\n                        />\r\n                        <Route\r\n                            path=\"/reset-password\"\r\n                            element={isAuthenticated && userRole === 'admin' ? <ResetPassword /> : <Navigate to=\"/login\" />}\r\n                        />\r\n                        <Route\r\n                            path=\"/grant-permissions\"\r\n                            element={isAuthenticated && userRole === 'admin' ? <GrantPermissions /> : <Navigate to=\"/login\" />}\r\n                        />\r\n                        <Route\r\n                            path=\"/forms/:formName\"\r\n                            element={isAuthenticated ? <FormDisplay /> : <Navigate to=\"/login\" />}\r\n                        />\r\n                    </Routes>\r\n                </div>\r\n            </Router>\r\n        </SplunkThemeProvider>\r\n    );\r\n};\r\n\r\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}